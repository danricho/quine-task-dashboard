<!DOCTYPE html>
<html lang="en" data-theme="light"><head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="color-scheme" content="light dark">
  <title></title>
  <meta name="description" content="A class-less example, without dependencies.">
  <link rel="stylesheet" href="static/css/pico.min.css">
  <link rel="stylesheet" href="static/css/pico.colors.min.css">
  <link rel="stylesheet" href="static/css/pico.ext.font-change-cairo-online.css">
  <link rel="stylesheet" href="static/css/pico.ext.button-colors.css">
  <link rel="stylesheet" href="static/css/pico.ext.responsive-visibility.css">
  <link rel="stylesheet" href="static/css/pico.ext.flexbox-utilities.css">
  <link rel="stylesheet" href="static/css/pico.ext.toasts.css">
  <link rel="stylesheet" href="static/css/switcher-expand.min.css">   
  <link rel="stylesheet" href="static/css/sidebar.css">   
  <link rel="stylesheet" href="static/css/pico.ext.printing.css">
  <link rel="stylesheet" href="static/css/app.css">   

  <link rel="icon" type="image/svg+xml" href="static/images/icon.svg">   
  <script src="static/js/jquery_3.7.0.min.js"></script> 
  <script src="static/js/Sortable.min.js"></script> 
  <script src="static/js/jquery.editable.min.js"></script> 

</head>

<body>
        
<div id="container">

    <div style="display: none;" id="hidden-templates">
      <div role="group" style="margin-top: 0.25rem;" class="no-print" id="addTaskInputs">
        <input type="text" class="tsk-name">
        <select class="tsk-milestone"></select>
        <input type="date" class="tsk-date">
        <select class="tsk-category"></select>
        <button id="addTask" class="addTask" data-allocation="">Add</button>
      </div>
    </div>

    <div id="sidebar" class="no-print" style="border-right: var(--pico-border-width) solid var(--pico-card-border-color); width: 244px;">
      <div class="flex items-center" style="margin: 2rem 0;">
        <div id="logo"></div>
        <div class="flex-grow">
          <h5 style="margin: 0 1rem;"><span id="pageTitle" data-edit-event="dblclick.textEditor"></span></h5>
        </div>
        <div class="theme-toggle" title="Toggle theme" style="margin: 0 0rem;">
          <span class="theme-toggle-sr">Toggle theme</span>
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="1em" height="1em" fill="currentColor" class="theme-toggle__expand" viewBox="0 0 32 32">
            <clipPath id="theme-toggle__expand__cutout">
              <path d="M0-11h25a1 1 0 0017 13v30H0Z"></path>
            </clipPath>
            <g clip-path="url(#theme-toggle__expand__cutout)">
              <circle cx="16" cy="16" r="8.4"></circle>
              <path d="M18.3 3.2c0 1.3-1 2.3-2.3 2.3s-2.3-1-2.3-2.3S14.7.9 16 .9s2.3 1 2.3 2.3zm-4.6 25.6c0-1.3 1-2.3 2.3-2.3s2.3 1 2.3 2.3-1 2.3-2.3 2.3-2.3-1-2.3-2.3zm15.1-10.5c-1.3 0-2.3-1-2.3-2.3s1-2.3 2.3-2.3 2.3 1 2.3 2.3-1 2.3-2.3 2.3zM3.2 13.7c1.3 0 2.3 1 2.3 2.3s-1 2.3-2.3 2.3S.9 17.3.9 16s1-2.3 2.3-2.3zm5.8-7C9 7.9 7.9 9 6.7 9S4.4 8 4.4 6.7s1-2.3 2.3-2.3S9 5.4 9 6.7zm16.3 21c-1.3 0-2.3-1-2.3-2.3s1-2.3 2.3-2.3 2.3 1 2.3 2.3-1 2.3-2.3 2.3zm2.4-21c0 1.3-1 2.3-2.3 2.3S23 7.9 23 6.7s1-2.3 2.3-2.3 2.4 1 2.4 2.3zM6.7 23C8 23 9 24 9 25.3s-1 2.3-2.3 2.3-2.3-1-2.3-2.3 1-2.3 2.3-2.3z"></path>
            </g>
          </svg>
        </div>
      </div>
      <div id="read-only-banner" style="display: none;">
        <h3 style="color: var(--pico-form-element-invalid-active-border-color); margin: 0.25rem 0;"><em>READ ONLY</em></h3>
        <em style="color: var(--pico-form-element-invalid-active-border-color);">CHANGES WONT SAVE!</em>
      </div>  
      <div>
        <button id="saveButton" class="outline" style="margin: 0.25rem 0;">Save Changes</button> 
        <button id="exportButton" class="outline" style="margin: 0.25rem 0;">Export</button>    
        <!-- <button id="saveReadOnly" class="outline" style="margin: 0.5rem 0;">Read Only Version</button>     -->
        <small><em>Last saved <span id="saveDate"></span>.</em></small>
      </div>  
          
      <div style="margin: 3rem 0;">
        <ul>
          <li><a href="#milestones">Milestones</a></li>
          <li><a href="#allocate">Allocate</a>
          <ul id="menuAllocationOptions"></ul></li>
          <li><a href="#completedTasks">Completed</a></li>
        </ul>
      </div>         
        
      <button id="openFilters" class="outline" style="margin: 0.25rem 0;">Filters</button>
      <button id="manageAllocations" class="outline" style="margin: 0.25rem 0;">Allocation Options</button>
      <button id="manageCategories" class="outline" style="margin: 0.25rem 0;">Category Options</button>

      <div style="padding: 1rem 0; margin-top: 1rem; border-top: var(--pico-border-width) solid var(--pico-card-border-color);">
        <small><a href="javascript:void(0)" id="openAboutModal">A quine HTML dashboard</a>.<br>v1.4 - Built with <a href="https://picocss.com" target="_blank">Pico CSS</a>.<br><span id="byLine"></span></small>
      </div>
    </div>

    <div id="resizer" class="no-print"></div>
          
    <main> 

      <article style="margin-bottom: 2rem;" id="milestones">
      <details style="margin: 0rem;">
        <summary><h2 style="margin: 0; display: inline-block;">Milestones</h2><small style="margin: 0 1rem;" id="ms-count" class="count"></small></summary>
        <p class="guidance no-print">
          Set and manage project milestones. 
          Tasks linked to a milestone will automatically show its date and name. <br>
          Edit names or dates inline, delete unused milestones, or add a new milestone below.          
        </p>
        <div id="milestoneList"></div>   
        <div role="group" style="margin-top: 0.25rem;" class="no-print"><input type="text" class="ms-name"><input type="date" class="ms-date"><button id="addMilestone">Add</button></div>      
      </details>
      </article>

      <article id="allocate" style="margin-bottom: 2rem;">  
      <details style="margin: 0rem;" open="">
        <summary><h2 style="margin: 0; display: inline-block;">Task Allocations</h2><small style="margin: 0 1rem;" id="tasks-count" class="count">(TBD)</small></summary>
        <p class="guidance no-print">
          Assign tasks by dragging tasks between lists to reassign them.
        </p>
        <p class="no-print active-filter">
          Task Filtering: <span class="active-filter-summary"></span>
        </p>
        <div id="allocationOptionSections"></div>
        <div id="unallocated" style="margin-top: 1.5rem;">
          <h3 style="color: var(--pico-form-element-invalid-active-border-color); display: inline-block;"><em>Unallocated</em></h3><small style="margin: 0 1rem;" id="tasks-allocations-unallocated-count" class="count"></small>
          <div class="task-list"></div>  
          <div role="group" style="margin-top: 0.25rem;" class="no-print" id="">
            <input type="text" class="tsk-name">
            <select class="tsk-milestone"></select>
            <input type="date" class="tsk-date">
            <select class="tsk-category"></select>
            <button id="addTask" class="addTask" data-allocation="">Add</button>
          </div>        
        </div>       
      </details>
      </article>

      <article id="completedTasks" style="margin-bottom: 2rem;">  
      <details style="margin: 0rem;">
        <summary><h2 style="margin: 0; display: inline-block;">Completed Tasks</h2><small style="margin: 0 1rem;" id="tasks-complete-count" class="count"></small></summary>
        <p class="guidance no-print">          
          Tasks marked as completed appear here. <br>
          You can restore them if needed using the edit options.
        </p>
        <div class="completed-list"></div>    
      </details>
      </article>
    
    </main>    

    <!-- Modals -->
    <dialog id="confirmModal">
      <article>
        <header>
          <h3 id="confirmModalTitle"></h3>
        </header>
        <form>
          <p id="confirmModalText">Are you sure you want to delete this task?</p>
          <footer>
            <button type="button" id="confirmYes">Yes</button>
            <button type="button" id="confirmNo" class="secondary">Cancel</button>
          </footer>
        </form>
      </article>
    </dialog>

    <dialog id="filtersModal">
      <article>
        <header>
          <h3>Filters</h3>
        </header>
        <div id="filtersModalBody" style="max-height: 60vh; overflow-y: auto; padding: 1rem;"></div>
        <footer style="display:flex; gap:.5rem; justify-content: space-between;">
          <div>
            <button type="button" id="filtersClearBtn" class="secondary">Clear filters</button>
          </div>
          <div>
            <button type="button" id="filtersCloseBtn">Close</button>
          </div>
        </footer>
      </article>
    </dialog>


    <dialog id="alertModal">
      <article>
        <header>
          <h3 id="alertModalTitle">Notice for Export</h3>        
        </header>
        <form>
          <p id="alertModalText">HTML summary copied to clipboard.</p>
          <footer>
            <button type="button" id="alertClose">OK</button>
          </footer>
        </form>
      </article>
    </dialog>

    <dialog id="taskEditModal">
      <article>
        <header>
          <h3>Edit Task '<span class="itemName"></span>'</h3>
        </header>
        <form>
          <label>
            Task Name:
            <input type="text" name="task-name" id="taskName">
          </label>
          <label>
            Due Date:
            <input type="date" name="task-due" id="taskDue">
          </label>
          <label>
            Milestone:
            <select name="task-milestone" id="taskMilestone"></select>
          </label>          
          <label>
            Category:
            <select name="task-category" id="taskCategory"></select>
          </label>
          <label>
            Allocated To:
            <select name="task-assigned" id="taskAssigned"></select>
          </label>
          <label>
            Confluence Link:
            <input type="url" name="confluence" id="confluenceUrl">
          </label>
          <label>
            JIRA Link:
            <input type="url" name="jira" id="jiraUrl">
          </label>
          <label>
            Other Link:
            <input type="url" name="other" id="otherUrl">
          </label>
          <label>
            <input type="checkbox" id="taskCompleted">
            Mark as Completed
          </label>
          <footer style="margin-top: 1rem;">
            <button type="button" id="saveEditedTask" data-saveitemid="1">Save</button>
            <button type="button" id="cancelEditModal" class="secondary">Cancel</button>
          </footer>
        </form>
      </article>
    </dialog>

    <dialog id="aboutModal">
      <article>
        <header style="padding: 1rem;">
          <h3>About this quine HTML dashboard</h3>
        </header>
        <div style="max-height: 60vh; overflow-y: auto; padding: 1rem;">
          <p>This dashboard is a lightweight, interactive interface for managing team priorities and task assignments in real-time.</p>
          <hr>
          <strong>Features</strong>
          <ul>
            <li><strong>Task allocation</strong> — drag tasks between team lists (or into <em>Unallocated</em>). Reordering inside a person's list uses a <em>minimal-change</em> priority shuffle so only that list is affected.</li>
            <li><strong>Perpetual tasks & milestones</strong> — tasks and milestones can exist without a due date. Undated milestones act as thematic groupings, and tasks may be explicitly marked as <em>No due date</em>.</li>
            <li><strong>Backlog-aware behavior</strong> — the divider is fixed in allocation lists (non-draggable) and supports dropping to <em>empty</em> above/below via subtle dropzones. Cross-divider moves 'mint' the smallest possible priority so items stay exactly where dropped.</li>
            <li><strong>Filtering</strong> — filter by <em>Category</em>, <em>Milestone</em> (including dated, undated, and direct-dated tasks), and a matching text search.</li>
            <li><strong>Inline editing</strong> — edit task names, due dates, milestone links, category, allocation, and links (Jira, Confluence, Other) in place.</li>
            <li><strong>Completed tasks</strong> — mark done and restore later from the Completed view.</li>
            <li><strong>Manage options</strong> — add/remove <em>Allocation Options</em> (team members) and <em>Categories</em> from their modals.</li>
            <li><strong>Export</strong> — quick HTML summary for email/Word via the Export button.</li>
            <li><strong>Read Only render mode</strong> — a saved html can be setup for view only via a variable set to false (edit the html - variable is 'renderReadOnly').</li>
            <li><strong>Save &amp; persist</strong> — changes are saved in this self-contained (quine) HTML file.</li>
            <li><strong>Tech</strong> — Pico CSS, jQuery, SortableJS, jquery.editable.</li>
          </ul>

          <hr>          
          <strong>What is a Quine?</strong>
          <p>
            A <strong>quine</strong> is a computer program that produces its own source code as output, without reading it from a file.
            It's named after philosopher Willard Van Orman Quine.
          </p>

          <hr>
          <strong>To-Do</strong>
          <ul>
            <li>Refactor javascript functions to allow a clean read-only export HTML option.</li>
            <li>Add an optional in-work / progress indication for tasks.</li>
            <li>Add a duration option for Milestones and Tasks.</li>
            <li>Add a gantt/calendar view.</li>
          </ul>


        </div>
        <footer style="padding: 1rem;">
          <button id="closeAboutModal">Close</button>
        </footer>
      </article>
    </dialog>

    <dialog id="allocationModal">
      <article>
        <header>
          <h3>Manage Allocation Options</h3>
        </header>
        <form>  
          <label>Existing (Edit/Remove):</label>
          <ul id="existingAllocationsList" style="max-height: 200px; overflow-y: auto;"></ul>
          <hr>
          <label>
            Add New Allocation:
            <input type="text" id="newAllocationInput" placeholder="e.g. Maria">
          </label>
          <label>
            Type (optional):
            <input type="text" id="newAllocationTypeInput" placeholder="e.g. Team or Job Title">
          </label>
          <button type="button" id="addAllocationOption">Add</button>
          <hr>
          <footer>
            <button type="button" id="closeAllocationModal" class="secondary">Close</button>
          </footer>
        </form>
      </article>
    </dialog>
    
    <dialog id="categoryModal">
      <article>
        <header>
          <h3>Manage Categories</h3>
        </header>
     
          <label>Existing (click name to edit):</label>
          <ul id="existingCategoriesList" style="max-height: 80vh; overflow-y: auto; padding: 0;"></ul>

          <hr>
          <label>
            Add New Category:
            <input type="text" id="newCatCode" placeholder="Code e.g. QA" style="max-width: 10rem;">
          </label>
          <label>
            Name:
            <input type="text" id="newCatName" placeholder="Name e.g. Quality Assurance">
          </label>
          <label>
            Color:
            <select id="newCatColor" name="newCatColor">
              <option value="#22c55e" style="color:#22c55e">Green (#22c55e)</option>
              <option value="#14b8a6" style="color:#14b8a6">Teal (#14b8a6)</option>
              <option value="#06b6d4" style="color:#06b6d4">Cyan (#06b6d4)</option>
              <option value="#0ea5e9" style="color:#0ea5e9">Sky (#0ea5e9)</option>
              <option value="#3b82f6" style="color:#3b82f6">Blue (#3b82f6)</option>
              <option value="#6366f1" style="color:#6366f1">Indigo (#6366f1)</option>
              <option value="#8b5cf6" style="color:#8b5cf6">Violet (#8b5cf6)</option>
              <option value="#a855f7" style="color:#a855f7">Purple (#a855f7)</option>
              <option value="#d946ef" style="color:#d946ef">Fuchsia (#d946ef)</option>
              <option value="#f43f5e" style="color:#f43f5e">Rose (#f43f5e)</option>
              <option value="#ef4444" style="color:#ef4444">Red (#ef4444)</option>
              <option value="#f97316" style="color:#f97316">Orange (#f97316)</option>
              <option value="#f59e0b" style="color:#f59e0b">Amber (#f59e0b)</option>
              <option value="#84cc16" style="color:#84cc16">Lime (#84cc16)</option>
              <option value="#64748b" style="color:#64748b">Slate (#64748b)</option>
              <option value="#71717a" style="color:#71717a">Zinc (#71717a)</option>
            </select>
            <select id="colorOptionsTemplate" hidden="">
              <option value="#22c55e" style="color:#22c55e">Green (#22c55e)</option>
              <option value="#14b8a6" style="color:#14b8a6">Teal (#14b8a6)</option>
              <option value="#06b6d4" style="color:#06b6d4">Cyan (#06b6d4)</option>
              <option value="#0ea5e9" style="color:#0ea5e9">Sky (#0ea5e9)</option>
              <option value="#3b82f6" style="color:#3b82f6">Blue (#3b82f6)</option>
              <option value="#6366f1" style="color:#6366f1">Indigo (#6366f1)</option>
              <option value="#8b5cf6" style="color:#8b5cf6">Violet (#8b5cf6)</option>
              <option value="#a855f7" style="color:#a855f7">Purple (#a855f7)</option>
              <option value="#d946ef" style="color:#d946ef">Fuchsia (#d946ef)</option>
              <option value="#f43f5e" style="color:#f43f5e">Rose (#f43f5e)</option>
              <option value="#ef4444" style="color:#ef4444">Red (#ef4444)</option>
              <option value="#f97316" style="color:#f97316">Orange (#f97316)</option>
              <option value="#f59e0b" style="color:#f59e0b">Amber (#f59e0b)</option>
              <option value="#84cc16" style="color:#84cc16">Lime (#84cc16)</option>
              <option value="#64748b" style="color:#64748b">Slate (#64748b)</option>
              <option value="#71717a" style="color:#71717a">Zinc (#71717a)</option>
            </select>
          </label>
          <button type="button" id="addCategory">Add</button>
          <hr>
          <footer>
            <button type="button" id="closeCategoryModal" class="secondary">Close</button>
          </footer>

      </article>
    </dialog>

</div>

<div id="toast-container" style="position: fixed; top: 1rem; right: 1rem; z-index: 9999;"></div>

  
<!-- data -->
<script>
saveDate = "2025-08-27 12:52";
pageTitle = "Test Data Dashboard";
byLine = "Me.";
renderReadOnly = false;
logo = `
<svg width="2rem" height="2rem" xmlns="http://www.w3.org/2000/svg">
  <rect width="2rem" height="2rem" x="0" y="0"/>
</svg>
`;
const allocationOptions = [
  { "name": "Dennis", "type": "Senior Developer" },
  { "name": "Gilbert", "type": "Junior Developer" },
  { "name": "TEST", "type": "debug" }
];
const milestones = [
  { "id": 1,  "name": "Test Milestone 1", "date": "2026-01-18" },
  { "id": 2,  "name": "Test Milestone 2", "date": "2026-01-24" },
  { "id": 3,  "name": "Production Release", "date": "2026-02-01" },
  { "id": 4,  "name": "**GLOBAL** Release", "date": "" }
];
const tasks = [
  { "id": 1, "text": "Assigned Task 1 (MS1)", "due": null, "milestoneId": 1, "assignedTo": "Dennis", "priority": 3, "link-conf": "", "link-jira": "https://google.com", "category": "ADM", "link-other": "", "completed": false },
  { "id": 2, "text": "Assigned Task 2 (MS2)", "due": null, "milestoneId": 2, "assignedTo": "Gilbert", "priority": 0, "category": "ADM", "link-conf": "https://google.com", "link-jira": "https://google.com", "link-other": "https://google.com", "completed": false },
  { "id": 3, "text": "Unassigned Task 1 (MS1)", "due": null, "milestoneId": 1, "assignedTo": null, "priority": 1, "category": "INV", "link-conf": "https://google.com", "link-jira": "https://google.com", "link-other": "https://google.com", "completed": false },
  { "id": 4, "text": "Release Notes", "due": null, "milestoneId": 4, "assignedTo": "Gilbert", "priority": 1, "category": "INV", "link-conf": "https://google.com", "link-jira": "https://google.com", "link-other": "https://google.com", "completed": false },
  { "id": 5, "text": "Comb Hair", "due": null, "milestoneId": null, "assignedTo": "TEST", "priority": 1, "category": "INV", "link-conf": "https://google.com", "link-jira": "https://google.com", "link-other": "https://google.com", "completed": false },
  { "id": 6, "text": "Another test", "due": "2026-01-24", "milestoneId": null, "assignedTo": null, "category": null, "priority": 6 },
  { "id": -1, "text": "-- Backlog Starts Here --", "assignedTo": null, "priority": 5, "isBacklogDivider": true }
];
const categories = [
  { "code": "ADM", "name": "Admin", "color": "#64748b" },
  { "code": "INV", "name": "Investigation", "color": "#06b6d4" },
  { "code": "TST", "name": "test - debug cat", "color": "#22c55e" }
];
</script>
<!-- end data -->

<script src="static/js/minimal-theme-switcher.js"></script>
<script src="static/js/sidebar.js"></script>
<script src="static/js/app.js"></script>

</body></html>